(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,a){},122:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),o=a.n(s),r=a(29),i=a.n(r),c=(a(147),a(10)),l=a(11),h=a(13),d=a(12),u=(a(148),a(20)),p=a(19),j=a(22),b=a(141),m=a(60),g=(a(6).createBootstrapComponent,{DISCONNECTED:0,CONNECTED:1,KICKED:2,GAME_ENDED:0,IN_LOBBY:1,IN_GAME:2,GAME_DISCONNECTED:3,ERR:-1}),f="",O=Object(s.createContext)(null),v=function(e){var t=e.children,a=Object(s.useState)({authenticated:!1}),o=Object(m.a)(a,2),r=o[0],i=o[1];Object(s.useEffect)((function(){c()}),[]);var c=function(){fetch("/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){i({authenticated:!0,user:e.user})})).catch((function(e){i({authenticated:!1,error:"Failed to authenticated user"})}))},l={auth:r,logout:function(){window.open("/auth/logout","_self"),i({authenticated:!1})},getUserInfo:c};return Object(n.jsx)(O.Provider,{value:l,children:t})},y=function(){return o.a.useContext(O)};var x=function(e){var t=e.component,a=Object(b.a)(e,["component"]),s=y().auth;return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsx)(p.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return s.authenticated?Object(n.jsx)(t,Object(j.a)({},e)):Object(n.jsx)(p.a,{to:"/login"})}}))})},k=a(16);function C(e){return function(t){var a=y();return Object(n.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{authCreds:a}))}}a(118);var w=a.p+"static/media/INKY.c0748b7d.png",N=C(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)(o.a.Fragment,{children:this.props.authCreds.auth.authenticated?Object(n.jsx)(p.a,{to:"/"}):Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"internal-container",children:[Object(n.jsx)("img",{src:w,className:"logo"}),Object(n.jsx)(k.a,{className:"login-button",onClick:function(){return window.open("/auth/google","_self")},children:"Sign in With Google"}),Object(n.jsxs)("div",{className:"infoContainer",children:[Object(n.jsx)("h3",{children:"About"}),Object(n.jsx)("p",{children:"Inky io is an online pictionary game to cure quarantine boredom"}),Object(n.jsx)("p",{children:"Developed by Julian Pinto, Christina Lu, Dheeraj Kumar, Justin Flores, Richard Williams and Jen-Wei Huang"}),Object(n.jsx)("p",{children:"Enjoy!"})]})]})})})}}]),a}(s.Component)),S=a(8),I=(a(153),a(119)),D=a(77),R=a(90),P=a(120),T=a(59),F=a(26),M=C(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"button-group",children:[this.props.showHome?Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)(k.a,{variant:"outline-dark",children:"Home"})}):"",Object(n.jsx)(u.b,{to:"/history",children:Object(n.jsx)(k.a,{variant:"outline-dark",onClick:this.props.history,children:"Match History"})}),Object(n.jsx)(u.b,{to:"/profile",children:Object(n.jsx)(k.a,{variant:"outline-dark",onClick:this.props.profile,children:"View Profile"})}),Object(n.jsx)(k.a,{variant:"outline-danger",onClick:this.props.authCreds.logout,children:"Logout"}),this.props.showCreateGame?Object(n.jsx)(k.a,{variant:"info",onClick:this.props.createGameClick,children:"Create Game"}):"",this.props.authCreds.auth.user.role?Object(n.jsx)(u.b,{to:"/report",children:Object(n.jsx)(k.a,{variant:"outline-dark",onClick:this.props.report,children:"View Report"})}):""]})}}]),a}(o.a.Component)),L=C(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"internal-container",children:[Object(n.jsx)("img",{src:w,className:"logo"}),Object(n.jsx)("div",{className:"infoContainer",children:Object(n.jsx)("p",{children:"This account has been suspended permanently. Please contact us for more information."})})]})}),")"]})}}]),a}(s.Component));function E(){var e=o.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1];return o.a.useEffect((function(){var e="undefined"===typeof window.navigator?"":navigator.userAgent,t=Boolean(e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));n(t)}),[]),{isMobile:a}}var A,H=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={gameCode:"",showRoomNotFound:!1},n.joinButtonTarget=new s.createRef,n.handleGameCodeChange=n.handleGameCodeChange.bind(Object(S.a)(n)),n.handleJoinGameClicked=n.handleJoinGameClicked.bind(Object(S.a)(n)),n.handleCreateGameClicked=n.handleCreateGameClicked.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleMatchHistoryClicked",value:function(){}},{key:"handleViewProfileClicked",value:function(){}},{key:"handleCreateGameClicked",value:function(){var e=this,t=this.props.authCreds.auth.user;fetch(f+"/lobby/create?hostId=".concat(t.id,"&hostName=").concat(t.name),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed create new room")})).then((function(t){var a={pathname:"/game/".concat(t.code)};e.props.history.push(a)})).catch((function(e){console.log(e)}))}},{key:"handleJoinGameClicked",value:function(){var e=this,t=this.props.authCreds.auth.user;""!==this.state.gameCode&&fetch("/lobby/join2",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:this.state.gameCode,userID:t.id})}).then((function(e){if(200===e.status)return e.json();throw new Error("failed fetching room info")})).then((function(t){if(t.success){var a={pathname:"/game/".concat(t.code)};e.props.history.push(a)}else e.setState({showRoomNotFound:!0,gameCode:"",gameErrorMessage:t.message}),setTimeout((function(){e.setState({showRoomNotFound:!1})}),5e3)})).catch((function(e){console.log(e)}))}},{key:"handleGameCodeChange",value:function(e){this.setState({gameCode:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.authCreds.auth.user;return t.ban?Object(n.jsx)(p.a,{to:"/BanPage"}):Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)("div",{className:"homepage-content",children:[Object(n.jsx)("h3",{children:t.name||"kirby placeholder"}),Object(n.jsx)("img",{className:"profile-picture",src:t.profileKey&&t.profileKey>0&&t.profileKey<=10?"https://pokeres.bastionbot.org/images/pokemon/".concat(t.profileKey,".png"):"https://play.nintendo.com/images/profile-kirby-kirby.7bf2a8f2.aead314d58b63e27.png",alt:"pfp"}),Object(n.jsx)(M,{showCreateGame:!this.props.mobile,createGameClick:this.handleCreateGameClicked}),Object(n.jsxs)(I.a,{style:{maxWidth:"70%",margin:"10px auto"},children:[Object(n.jsx)(D.a,{disabled:this.props.mobile,placeholder:"Enter lobby code to join a game",value:this.state.gameCode,onChange:this.handleGameCodeChange,"aria-label":"Lobby Code"}),Object(n.jsx)(I.a.Append,{children:Object(n.jsx)(k.a,{ref:this.joinButtonTarget,disabled:this.props.mobile,variant:"success",onClick:this.handleJoinGameClicked,children:"Join Game"})})]}),Object(n.jsx)(R.a,{target:this.joinButtonTarget,show:this.state.showRoomNotFound,placement:"top",onClose:function(){return e.setState({showRoomNotFound:!1})},children:Object(n.jsx)(P.a,{children:Object(n.jsx)(P.a.Content,{children:this.state.gameErrorMessage})})}),Object(n.jsx)(T.a,{defaultActiveKey:"0",className:"info",children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(F.a.Header,{children:Object(n.jsx)(T.a.Toggle,{as:k.a,variant:"link",eventKey:"0",children:"How to Play"})}),Object(n.jsx)(T.a.Collapse,{eventKey:"0",children:Object(n.jsxs)(F.a.Body,{children:["Create a game lobby and invite your friends to play or join an existing lobby above. Adjust the settings to your liking then start the game. When it's your turn to draw, choose one of the three words and visualize it before the time runs out. The more people that get the word right, the more points you win! When somebody else is drawing, type your guess into the chat to gain points. Be quick, the earlier you guess a word the more points you get! ",Object(n.jsx)("br",{}),Object(n.jsx)("u",{children:"Tip:"})," hints will appear above the canvas as time passes. ",Object(n.jsx)("br",{}),Object(n.jsx)("u",{children:"Note:"})," if you a player is making you feel uncomfortable at anytime, click their card on the left to report them"]})})]})})]})})}}]),a}(o.a.Component),G=C((A=H,function(e){var t=E().isMobile;return Object(n.jsx)(A,Object(j.a)(Object(j.a)({},e),{},{mobile:t}))})),W=a(23),B=(a(155),a(111)),_=a.n(B),K=C(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userUsername:n.props.authCreds.auth.user.name,userImageDisplay:n.props.authCreds.auth.user.profileKey?n.imageWebLink(n.props.authCreds.auth.user.profileKey):"https://play.nintendo.com/images/profile-kirby-kirby.7bf2a8f2.aead314d58b63e27.png",modalShow:!1,userImageDisplayIndex:n.props.authCreds.auth.user.profileKey},n.usernameChange=n.usernameChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n.handleProfilePicture=n.handleProfilePicture.bind(Object(S.a)(n)),n.setModalShow=n.setModalShow.bind(Object(S.a)(n)),n.handleProfilePick=n.handleProfilePick.bind(Object(S.a)(n)),n.imageWebLink=n.imageWebLink.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"usernameChange",value:function(e){this.setState({userUsername:e.target.value})}},{key:"handleProfilePicture",value:function(){for(var e=[],t=1;t<=10;t++)e.push(Object(n.jsx)("img",{id:t,className:"pokemonImg",src:this.imageWebLink(t),onClick:this.handleProfilePick},t));return e}},{key:"handleProfilePick",value:function(e){this.setState({userImageDisplayIndex:e.target.id,userImageDisplay:this.imageWebLink(e.target.id),modalShow:!1})}},{key:"imageWebLink",value:function(e){return e&&e>0&&e<=10?"https://pokeres.bastionbot.org/images/pokemon/".concat(e,".png"):"https://play.nintendo.com/images/profile-kirby-kirby.7bf2a8f2.aead314d58b63e27.png"}},{key:"handleSubmit",value:function(){var e=this;fetch(f+"/profile/change/name?userID=".concat(this.props.authCreds.auth.user.id,"&newName=").concat(this.state.userUsername,"&userPicture=").concat(this.state.userImageDisplayIndex),{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed create new room")})).then((function(t){console.log(t),e.props.authCreds.getUserInfo(),e.dialog.showAlert("Your update was successful!")})).catch((function(t){console.log(t),e.dialog.showAlert("Something went wrong please try again.")}))}},{key:"setModalShow",value:function(e){this.setState({modalShow:e})}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)(M,{className:"nav",showCreateGame:!1,showHome:!0}),Object(n.jsx)("div",{className:"profilecontainer",children:Object(n.jsxs)("div",{className:"profile",children:[Object(n.jsxs)("div",{className:"picture",children:[Object(n.jsx)("img",{className:"profile-picture",src:this.state.userImageDisplay,alt:"pfp"}),Object(n.jsx)(k.a,{variant:"primary",className:"pickIcon",onClick:function(){return e.setModalShow(!0)},children:"Change Profile Picture"})]}),Object(n.jsxs)("div",{className:"name",children:[Object(n.jsx)("p",{className:"nameTitle",children:"Display Name: "}),Object(n.jsx)("input",{className:"nameInput",type:"text",value:this.state.userUsername,onChange:this.usernameChange})]}),Object(n.jsx)(k.a,{variant:"success",className:"savebutton",onClick:this.handleSubmit,children:"Save Changes"}),Object(n.jsx)(_.a,{ref:function(t){e.dialog=t}})]})}),Object(n.jsxs)(W.a,{show:this.state.modalShow,onHide:function(){return e.setModalShow(!1)},children:[Object(n.jsx)(W.a.Header,{children:"Icons"}),Object(n.jsx)(W.a.Body,{children:Object(n.jsx)("div",{id:"profilePictureContainer",className:"modalBody",children:this.handleProfilePicture()})}),Object(n.jsx)(W.a.Footer,{children:Object(n.jsx)(k.a,{onClick:function(){return e.setModalShow(!1)},children:"Close"})})]})]})})}}]),a}(o.a.Component)),U=(a(158),a(137)),J=a(81),Y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={numRounds:n.props.settings.rounds,drawingTime:n.props.settings.draw_time,customWords:"",roomLink:n.props.match.params.lobbyID,numRoundsOptions:[1,2,3,4,5,6,7,8,9,10],drawingTimeOptions:[5,30,45,60,75,90,100,115,130,145,160,175,190,200,215,230],roomLinkValue:"hover to see lobby link",modalShow:!1},n.handleNumRoundsChange=n.handleNumRoundsChange.bind(Object(S.a)(n)),n.handleDrawingTimeChange=n.handleDrawingTimeChange.bind(Object(S.a)(n)),n.handleCustomWordChange=n.handleCustomWordChange.bind(Object(S.a)(n)),n.handleCopyClicked=n.handleCopyClicked.bind(Object(S.a)(n)),n.startGame=n.startGame.bind(Object(S.a)(n)),n.kickPlayerClicked=n.kickPlayerClicked.bind(Object(S.a)(n)),n.kick=n.kick.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("setting-change",(function(t){e.setState({numRounds:t.rounds,drawingTime:t.draw_time})})),this.props.socket.on("kick",(function(t){e.kick()}))}},{key:"kick",value:function(){this.setState({modalShow:!0})}},{key:"componentWillUnmount",value:function(){this.props.socket.offAny(["setting-change","kick"])}},{key:"handleNumRoundsChange",value:function(e){var t=this.props.match;this.props.socket.emit("setting-change",t.params.lobbyID,{rounds:e.target.value,draw_time:this.state.drawingTime}),this.setState({numRounds:e.target.value})}},{key:"handleDrawingTimeChange",value:function(e){var t=this.props.match;this.props.socket.emit("setting-change",t.params.lobbyID,{rounds:this.state.numRounds,draw_time:e.target.value}),this.setState({drawingTime:e.target.value})}},{key:"handleCustomWordChange",value:function(e){this.setState({customWords:e.target.value})}},{key:"handleCopyClicked",value:function(){navigator.clipboard.writeText(this.state.roomLink)}},{key:"startGame",value:function(){var e=this.props.match;if(this.state.customWords.length){var t=this.state.customWords.split(",");this.props.socket.emit("add-words",e.params.lobbyID,t)}this.props.socket.emit("lobby-state-change",e.params.lobbyID,g.IN_GAME)}},{key:"renderSelectOptions",value:function(e){return e.map((function(e,t){return Object(n.jsx)("option",{children:e},t)}))}},{key:"countPlayers",value:function(){var e=0;return this.props.players.forEach((function(t){t.disconnected||e++})),e}},{key:"kickPlayerClicked",value:function(e){var t=e.target.parentNode.id,a=this.props.match.params.lobbyID;this.props.socket.emit("kickPlayer",a,t)}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"game-lobby-page",children:Object(n.jsxs)("div",{className:"game-lobby-content",children:[Object(n.jsxs)("div",{className:"settings",children:[Object(n.jsx)("h3",{style:{textAlign:"center",paddingBottom:"1em"},children:"Settings"}),Object(n.jsxs)(U.a,{className:"settings-form",children:[Object(n.jsxs)(U.a.Group,{as:U.a.Row,children:[Object(n.jsx)(U.a.Label,{column:!0,sm:5,children:"Number of Rounds"}),Object(n.jsx)(J.a,{sm:7,children:Object(n.jsx)(U.a.Control,{as:"select",disabled:!this.props.isHost,value:this.state.numRounds,onChange:this.handleNumRoundsChange,children:this.renderSelectOptions(this.state.numRoundsOptions)})})]}),Object(n.jsxs)(U.a.Group,{as:U.a.Row,children:[Object(n.jsx)(U.a.Label,{column:!0,sm:5,children:"Drawing Time"}),Object(n.jsx)(J.a,{sm:7,children:Object(n.jsxs)(I.a,{children:[Object(n.jsx)(U.a.Control,{as:"select",disabled:!this.props.isHost,value:this.state.drawingTime,onChange:this.handleDrawingTimeChange,children:this.renderSelectOptions(this.state.drawingTimeOptions)}),Object(n.jsx)(I.a.Append,{children:Object(n.jsx)(I.a.Text,{children:"seconds"})})]})})]}),Object(n.jsxs)(U.a.Group,{as:U.a.Row,children:[Object(n.jsx)(U.a.Label,{column:!0,sm:5,children:"Customs Words"}),Object(n.jsx)(U.a.Control,{as:"textarea",disabled:!this.props.isHost,readOnly:!this.props.isHost,placeholder:"Leave blank to only use default words. Separate words with commas.",value:this.state.customWords,onChange:this.handleCustomWordChange})]}),Object(n.jsxs)(I.a,{onMouseOver:function(){e.setState({roomLinkValue:e.state.roomLink})},onMouseOut:function(){e.setState({roomLinkValue:"hover to see lobby link"})},children:[Object(n.jsx)(U.a.Control,{disabled:!0,readOnly:!0,value:this.state.roomLinkValue,ref:function(t){e.roomLinkText=t}}),Object(n.jsx)(I.a.Append,{children:Object(n.jsx)(k.a,{dvariant:"info",onClick:this.handleCopyClicked,children:"Copy"})})]})]}),Object(n.jsxs)("div",{className:"button-group",children:[Object(n.jsx)(u.b,{to:"/",className:"leave-lobby-btn",children:Object(n.jsx)(k.a,{variant:"outline-secondary",children:"Leave Lobby"})}),Object(n.jsx)(k.a,{className:"start-game-btn",variant:"success",disabled:!this.props.isHost,onClick:this.startGame,children:"Start Game"})]})]}),Object(n.jsxs)("div",{className:"players",children:[Object(n.jsx)("h3",{style:{textAlign:"center",paddingBottom:"1em"},children:"Players"}),Object(n.jsx)("div",{className:"player-grid",children:this.props.players.map((function(t,a){return t.state===g.DISCONNECTED||t.state===g.KICKED?"":Object(n.jsxs)("div",{className:"player-container",id:t.id,children:[e.props.isHost&&t.id!==e.props.hostId?Object(n.jsx)(k.a,{variant:"danger",onClick:e.kickPlayerClicked,className:"kickButton",children:"X"}):"",Object(n.jsx)("img",{className:"player-pfp",src:t.profileKey&&t.profileKey>0&&t.profileKey<=10?"https://pokeres.bastionbot.org/images/pokemon/".concat(t.profileKey,".png"):"https://play.nintendo.com/images/profile-kirby-kirby.7bf2a8f2.aead314d58b63e27.png",alt:"pfp"}),Object(n.jsx)("div",{children:t.name})]},a)}))})]}),Object(n.jsxs)(W.a,{show:this.state.modalShow,children:[Object(n.jsx)(W.a.Header,{children:"Kicked"}),Object(n.jsx)(W.a.Body,{children:"You have been kicked from this room."}),Object(n.jsx)(W.a.Footer,{children:Object(n.jsx)(k.a,{onClick:function(){return e.props.history.push("/")},children:"Close"})})]})]})})}}]),a}(o.a.Component),V=Object(p.g)(Y),X=a(115),z=a.n(X),q=[{name:"2.5",value:2.5},{name:"5",value:5},{name:"10",value:10}],Q=[{name:"black",value:"#000000"},{name:"red",value:"#FF0000"},{name:"orange",value:"#FF8C00"},{name:"coral",value:"#F08080"},{name:"pink",value:"#FF98DC"},{name:"fuschsia",value:"#FF00FF"},{name:"purple",value:"#8F00F0"},{name:"turquoise",value:"#40E0D0"},{name:"blue",value:"#0000FF"},{name:"green",value:"#008000"},{name:"lime",value:"#00FF75"},{name:"yellow",value:"#FFFF00"},{name:"gold",value:"#FFD700"},{name:"brown",value:"#A52A2A"}];function Z(e){return Object(n.jsx)("div",{className:"color-option",onClick:function(t){t.preventDefault(),e.changeColor(e.colorVal)},style:{backgroundColor:e.colorVal},children:Object(n.jsx)("div",{className:"col-content",children:Object(n.jsx)("span",{children:""})})})}var $=a(63),ee=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).Sketch=function(e){e.setup=function(){e.createCanvas(n.myRef.current.offsetWidth,n.myRef.current.offsetHeight)},e.draw=function(){if(n.start){e.background("#ffffff");var t=e.width,a=e.height;n.props.strokes.forEach((function(n){e.strokeWeight(n.weight),e.stroke(n.color),e.line(n.x1*t,n.y1*a,n.x2*t,n.y2*a)})),n.start=!1}},e.reset=function(){console.log("Clearing canvas.."),e.clear(),e.background("#ffffff"),e.strokeCap(z.a.ROUND);var t=e.width,a=e.height;n.strokes.forEach((function(n){e.strokeWeight(n.weight),e.stroke(n.color),e.line(n.x1*t,n.y1*a,n.x2*t,n.y2*a)}))},e.mouseDragged=function(){var t=(new Date).getTime();if(t-n.prevCall>=10){var a=e.width,s=e.height;if(n.props.drawing&&0!==n.props.round_state){var o={type:0,x1:e.pmouseX/a,y1:e.pmouseY/s,x2:e.mouseX/a,y2:e.mouseY/s,color:n.color,weight:n.weight};n.strokes.push(o);var r=n.props.match;n.props.socket.emit("draw",r.params.lobbyID,o),e.strokeWeight(n.weight),e.stroke(n.color),e.line(e.pmouseX,e.pmouseY,e.mouseX,e.mouseY),n.prevCall=t}}},e.onNewDrawing=function(t,a){if(1===t.type)e.clear(),e.background("#ffffff");else{var s=e.width,o=e.height;e.strokeWeight(t.weight),e.stroke(t.color),e.line(t.x1*s,t.y1*o,t.x2*s,t.y2*o)}n.strokes=a},e.windowResized=function(){n.myRef.current&&e.resizeCanvas(n.myRef.current.offsetWidth,n.myRef.current.offsetHeight),e.reset()},n.sketch=e},n.colorOptionOnClick=function(e){console.log("Changing pen color to ".concat(e)),n.color=e},n.strokeOptionClick=function(e){e.preventDefault(),console.log("Changing stroke weight to ".concat(e.target.value)),n.weight=parseInt(e.target.value)},n.eraser=function(){n.color="#FFFFF"},n.clearCanvas=function(){var e=n.props.match;n.props.socket.emit("draw",e.params.lobbyID,{type:1}),n.sketch.clear(),n.sketch.background("#ffffff")},n.myRef=o.a.createRef(),n.strokes=n.props.strokes,n.start=!0,n.prevCall=(new Date).getTime,n.color="#000000",n.weight=1,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("Mounting canvas ".concat(this.start)),this.myP5=new z.a(this.Sketch,this.myRef.current),this.props.socket.on("draw",this.sketch.onNewDrawing)}},{key:"componentWillUnmount",value:function(){console.log("Unmounting canvas..."),this.props.socket.removeListener("draw"),this.sketch.remove()}},{key:"renderColorOptions",value:function(){var e=this,t=[];return Q.forEach((function(a,s){t.push(Object(n.jsx)(Z,{colorVal:a.value,changeColor:e.colorOptionOnClick},s))})),t}},{key:"renderStrokeOptions",value:function(){var e=this,t=[];return q.forEach((function(a,s){t.push(Object(n.jsx)(k.a,{variant:"dark",style:{padding:a.value+"px",maxWidth:"70px",width:"100%",borderRadius:"50px"},value:a.value,onClick:e.strokeOptionClick},s))})),t}},{key:"render",value:function(){return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)("div",{id:"canvas",ref:this.myRef}),this.props.drawing?Object(n.jsxs)("div",{className:"canvas-tool-container",children:[Object(n.jsx)("div",{className:"color-options-container",children:this.renderColorOptions()}),Object(n.jsxs)("div",{className:"tools",children:[Object(n.jsx)(o.a.Fragment,{children:this.renderStrokeOptions()}),Object(n.jsx)(k.a,{variant:"outline-info",onClick:this.eraser,children:Object(n.jsx)($.b,{})}),Object(n.jsx)(k.a,{variant:"outline-info",onClick:this.clearCanvas,children:Object(n.jsx)($.c,{})})]})]}):Object(n.jsx)(n.Fragment,{})]})}}]),a}(s.Component),te=Object(p.g)(ee),ae=(a(159),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(e){var t=this.props.match;this.props.socket.emit("turn-start",t.params.lobbyID,e)}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"words-modal",style:{display:this.props.show?"block":"none"},children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(F.a.Header,{children:Object(n.jsx)(F.a.Title,{children:this.props.isArtist?"Pick a Word":this.props.artistName+" is picking a word"})}),Object(n.jsx)(F.a.Footer,{children:this.props.isArtist?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k.a,{className:"word-btn",variant:"outline-dark",onClick:function(){return e.handleClick(e.props.words[0])},children:this.props.words[0]}),Object(n.jsx)(k.a,{className:"word-btn",variant:"outline-dark",onClick:function(){return e.handleClick(e.props.words[1])},children:this.props.words[1]}),Object(n.jsx)(k.a,{className:"word-btn",variant:"outline-dark",onClick:function(){return e.handleClick(e.props.words[2])},children:this.props.words[2]})]}):Object(n.jsx)("p",{children:"The round will start when a word is chosen!"})})]})})}}]),a}(o.a.Component)),ne=Object(p.g)(ae);a(160);function se(e){return Object(n.jsxs)("div",{className:"canvas-container",children:[Object(n.jsx)(te,{socket:e.socket,strokes:e.strokes,drawing:e.drawing,round_state:e.round_state}),Object(n.jsx)("div",{className:"custom-modal",onClick:function(e){e.preventDefault()},children:Object(n.jsx)(ne,{socket:e.socket,show:0===e.round_state,isArtist:e.drawing,artistName:e.drawer,round_state:e.round_state,words:e.word_list})})]})}var oe=a(98),re=a(116),ie=a.n(re),ce=a(139),le=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("p",{className:"message",children:[Object(n.jsxs)("span",{className:"message-name",children:[Object(n.jsx)("b",{children:this.props.message.name}),":  "]}),Object(n.jsx)("span",{className:"message-content",children:this.props.message.content})]})}}]),a}(s.Component),he=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentMessage:"",messageLog:[]},n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState({currentMessage:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.match;this.props.socket.emit("chat",t.params.lobbyID,this.state.currentMessage),this.setState({currentMessage:""})}},{key:"fetchChats",value:function(){var e=Object(ce.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/lobby/chatHistory?lobbycode=").concat(this.props.lobby));case 2:if(!(t=e.sent).ok){e.next=7;break}return e.abrupt("return",t.json());case 7:return e.abrupt("return",Promise.reject(t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.fetchChats().then((function(t){return e.setState({messageLog:t.chatLog})})).catch((function(e){return console.error(e)})),this.props.socket.on("chat",(function(t,a){console.log('received "'.concat(t,": ").concat(a,'"')),e.setState({messageLog:[].concat(Object(oe.a)(e.state.messageLog),[{name:t,content:a}])})}))}},{key:"componentWillUnmount",value:function(){this.props.socket.removeListener("chat")}},{key:"render",value:function(){return Object(n.jsxs)(F.a,{style:{height:"100%"},children:[Object(n.jsx)(F.a.Body,{children:this.state.messageLog.map((function(e,t){return Object(n.jsx)(le,{message:e},t)}))}),Object(n.jsx)(F.a.Footer,{children:Object(n.jsx)(U.a,{onSubmit:this.handleSubmit,children:Object(n.jsx)(U.a.Control,{type:"input",onChange:this.handleChange,value:this.state.currentMessage,placeholder:"type your guess here"})})})]})}}]),a}(s.Component),de=Object(p.g)(he),ue=(a(122),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={showReportModal:!1,showReportPopover:!1,cheating:!1,verbalAbuse:!1,inappropriateName:!1},n.cardRef=o.a.createRef(),n.reportPlayer=n.reportPlayer.bind(Object(S.a)(n)),n.initiateReportPlayer=n.initiateReportPlayer.bind(Object(S.a)(n)),n.renderReportModal=n.renderReportModal.bind(Object(S.a)(n)),n.renderReportOverlay=n.renderReportOverlay.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"getVariant",value:function(e){switch(e){case g.CONNECTED:return"primary";case g.KICKED:return"danger";case g.DISCONNECTED:return"secondary";default:return"warning"}}},{key:"initiateReportPlayer",value:function(){console.log("reporting",this.props.player),this.setState({showReportPopover:!1,showReportModal:!0})}},{key:"reportPlayer",value:function(){console.log("reported "+this.props.player,this.state),(this.state.cheating||this.state.verbalAbuse||this.state.inappropriateName)&&this.props.socket.emit("report",this.props.lobby,this.props.player.id,this.props.player.name,{cheating:this.state.cheating,verbalAbuse:this.state.verbalAbuse,inappropriateName:this.state.inappropriateName}),this.setState({cheating:!1,verbalAbuse:!1,inappropriateName:!1,showReportModal:!1})}},{key:"renderReportModal",value:function(){var e=this;return Object(n.jsxs)(W.a,{show:this.state.showReportModal,onHide:function(){return e.setState({showReportModal:!1})},children:[Object(n.jsx)(W.a.Header,{closeButton:!0,children:Object(n.jsxs)(W.a.Title,{children:["Why are you reporting ",this.props.player.name,"?"]})}),Object(n.jsxs)(W.a.Body,{children:[Object(n.jsx)("p",{children:"Check all that apply"}),Object(n.jsx)(U.a.Check,{label:"Cheating",type:"checkbox",value:this.state.cheating,onChange:function(){return e.setState({cheating:!e.state.cheating})}}),Object(n.jsx)(U.a.Check,{label:"Verbal Abuse",type:"checkbox",value:this.state.verbalAbuse,onChange:function(){return e.setState({verbalAbuse:!e.state.verbalAbuse})}}),Object(n.jsx)(U.a.Check,{label:"Inappropriate Name",type:"checkbox",value:this.state.inappropriateName,onChange:function(){return e.setState({inappropriateName:!e.state.inappropriateName})}})]}),Object(n.jsxs)(W.a.Footer,{children:[Object(n.jsx)(k.a,{variant:"warning",onClick:function(){return e.setState({showReportModal:!1})},children:"Cancel"}),Object(n.jsx)(k.a,{variant:"danger",onClick:function(){return e.reportPlayer()},children:"Report"})]})]})}},{key:"renderReportOverlay",value:function(){var e=this;return this.props.player.state===g.CONNECTED?Object(n.jsx)(R.a,{target:this.cardRef,show:this.state.showReportPopover,placement:"right",children:Object(n.jsx)(P.a,{children:Object(n.jsxs)("div",{className:"report-popover",children:[Object(n.jsx)("span",{children:"Report? "}),Object(n.jsx)(k.a,{variant:"outline-danger",onClick:function(){return e.setState({showReportPopover:!1})},children:Object(n.jsx)($.d,{})}),Object(n.jsx)(k.a,{variant:"outline-success",onClick:function(){return e.initiateReportPlayer()},children:Object(n.jsx)($.a,{})})]})})}):Object(n.jsx)(n.Fragment,{})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"player",children:[Object(n.jsx)("a",{style:{cursor:"pointer"},ref:this.cardRef,onClick:function(){return e.setState({showReportPopover:!0})},children:Object(n.jsxs)(F.a,{id:"player-card",border:"dark",bg:this.getVariant(this.props.player.state),children:[Object(n.jsx)(F.a.Header,{children:this.props.player.name}),Object(n.jsx)(F.a.Body,{children:Object(n.jsxs)(F.a.Text,{children:[Object(n.jsxs)("b",{children:["# ",this.props.index+1,"\u2003"]}),this.props.player.score]})})]})}),this.state.showReportPopover?this.renderReportOverlay():Object(n.jsx)(n.Fragment,{}),this.state.showReportModal?this.renderReportModal():Object(n.jsx)(n.Fragment,{})]})}}]),a}(o.a.Component)),pe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"player-sidebar",children:this.props.players.sort((function(e,t){return t.score-e.score})).map((function(t,a){return Object(n.jsx)(ue,{player:t,index:a,lobby:e.props.lobby,socket:e.props.socket},a)}))})}}]),a}(o.a.Component);a(162);function je(e){return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)("img",{className:"timer",src:"https://i.pinimg.com/originals/2a/0c/fe/2a0cfecd615bed18b3cf4688d2b5962c.png",alt:"pfp"}),Object(n.jsx)("div",{children:e.timer?parseInt(e.timer):e.timer})]})}var be=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={strokes:[],hint:[]},n.getTime=n.getTime.bind(Object(S.a)(n)),n.interval=null,n.syncInterval=null,n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){null!==this.interval&&(clearInterval(this.interval),clearInterval(this.syncInterval),this.interval=null,this.syncInterval=null)}},{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("game-status",(function(t){e.setState(Object(j.a)({},t)),e.state.playing&&null===e.interval&&(e.interval=setInterval((function(){e.state.timer>0?e.setState({timer:e.state.timer-.5}):(clearInterval(e.interval),clearInterval(e.syncInterval),e.interval=null,e.syncInterval=null)}),500),e.syncInterval=setInterval((function(){e.getTime()}),5e3))})),this.getRoundStatus(),this.props.socket.on("new-round-status",(function(){e.getRoundStatus()})),this.props.socket.on("startTimer",(function(){e.interval=setInterval((function(){e.state.timer>0?e.setState({timer:e.state.timer-.5}):(clearInterval(e.interval),clearInterval(e.syncInterval),e.interval=null,e.syncInterval=null)}),500),e.syncInterval=setInterval((function(){e.getTime()}),5e3)})),this.props.socket.on("stopTimer",(function(){clearInterval(e.interval),clearInterval(e.syncInterval),e.interval=null,e.syncInterval=null})),this.props.socket.on("timesync",(function(t){e.setState({timer:t})}))}},{key:"getTime",value:function(){this.props.socket.emit("timesync",this.props.match.params.lobbyID)}},{key:"getRoundStatus",value:function(){var e=this.props.match.params.lobbyID,t=this.props.authCreds.auth.user;this.props.socket.emit("game-status",e,t.id)}},{key:"render",value:function(){var e=this.props.authCreds.auth.user;return Object(n.jsxs)("div",{className:"game-page",children:[Object(n.jsx)(u.b,{to:"/",className:"leave-lobby-btn",children:Object(n.jsx)(k.a,{variant:"outline-secondary",children:"Leave Lobby"})}),Object(n.jsxs)("div",{className:"game-header",children:[Object(n.jsx)("div",{className:"empty-placeholder",style:{width:"15%"}}),Object(n.jsxs)("div",{className:"canvas-header",children:[Object(n.jsx)("h3",{style:{width:"max-content",margin:"auto"},children:this.state.hint}),Object(n.jsx)("div",{className:"timer",children:Object(n.jsx)(je,{socket:this.props.socket,timer:this.state.timer})})]}),Object(n.jsx)("div",{className:"empty-placeholder",style:{width:"25%"}})]}),Object(n.jsxs)("div",{className:"game-contents",children:[Object(n.jsx)("div",{className:"players-container",children:Object(n.jsx)(pe,{className:"players-container",players:this.props.players,lobby:this.props.match.params.lobbyID,socket:this.props.socket})}),Object(n.jsx)(se,{socket:this.props.socket,drawer:this.state.drawer?this.state.drawer.name:"",round_state:this.state.round_state,word_list:this.state.word_list,drawing:!!this.state.drawer&&this.state.drawer.id===e.id,strokes:this.state.strokes}),Object(n.jsx)("div",{className:"chat-container",children:Object(n.jsx)(de,{socket:this.props.socket,lobby:this.props.match.params.lobbyID})})]})]})}}]),a}(s.Component),me=function(e){return function(t){var a=y();return Object(n.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{authCreds:a}))}}(Object(p.g)(be)),ge=(a(163),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={usersInLobby:n.sortWinner(n.props.players)},n.sortWinner=n.sortWinner.bind(Object(S.a)(n)),n.playAgainClicked=n.playAgainClicked.bind(Object(S.a)(n)),n.leaveClicked=n.leaveClicked.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"sortWinner",value:function(e){for(var t=e.length-1;t>=0;t--)for(var a=1;a<=t;a++)if(e[a-1].score>e[a].score){var s=e[a-1];e[a-1]=e[a],e[a]=s}e.reverse();for(var o=[],r=0;r<e.length;r++)o.push(Object(n.jsxs)(F.a,{id:r,className:"player",style:{width:"6rem"},children:[Object(n.jsx)(F.a.Img,{variant:"top",src:e[r].profileKey&&e[r].profileKey>0&&e[r].profileKey<=10?"https://pokeres.bastionbot.org/images/pokemon/".concat(e[r].profileKey,".png"):"https://play.nintendo.com/images/profile-kirby-kirby.7bf2a8f2.aead314d58b63e27.png"}),Object(n.jsxs)(F.a.Body,{className:"playerGameInfo",style:{padding:"0px"},children:[Object(n.jsx)(F.a.Title,{className:"playerName",children:e[r].name}),Object(n.jsxs)(F.a.Text,{className:"playerScore",children:["Points: ",e[r].score]})]})]},r));return o}},{key:"playAgainClicked",value:function(){var e=this.props.match.params.lobbyID;this.props.socket.emit("lobby-state-change",e,g.IN_LOBBY)}},{key:"leaveClicked",value:function(){if(this.props.isHost){var e=this.props.match.params.lobbyID;this.props.socket.emit("dc-game",e)}this.props.history.push("/")}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)("div",{className:"content",children:[Object(n.jsxs)("div",{className:"podium",children:[Object(n.jsxs)("div",{className:"playerPodium",children:[Object(n.jsx)("p",{children:this.state.usersInLobby[1]}),Object(n.jsx)("div",{className:"podium2"})]}),Object(n.jsxs)("div",{className:"playerPodium",children:[Object(n.jsx)("p",{children:this.state.usersInLobby[0]}),Object(n.jsx)("div",{className:"podium1"})]}),Object(n.jsxs)("div",{className:"playerPodium",children:[Object(n.jsx)("p",{children:this.state.usersInLobby[2]}),Object(n.jsx)("div",{className:"podium3"})]})]}),Object(n.jsx)("div",{className:"restPlayers",children:Object(oe.a)(this.state.usersInLobby.slice(3))}),Object(n.jsxs)("div",{className:"buttonSet",children:[this.props.isHost?Object(n.jsx)(k.a,{className:"playAgain",variant:"secondary",onClick:this.playAgainClicked,children:"Play Again"}):"",Object(n.jsx)(k.a,{className:"leave",variant:"success",onClick:this.leaveClicked,children:"Leave"})]})]})})}}]),a}(o.a.Component)),fe=Object(p.g)(ge),Oe=a(140),ve=a.n(Oe);var ye=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={host:!1,socket:ve.a.connect(f)},n.onJoin=n.onJoin.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.socket.once("connect",(function(e){console.log("Connected to the server socket...")}));var t=this.props.match.params.lobbyID,a=this.props.authCreds.auth.user;this.state.socket.on("join",this.onJoin),this.state.socket.on("player-list-update",(function(t){e.setState({host:t.host.id===a.id,host_info:t.host,players:t.players})})),this.state.socket.on("score",(function(t){e.setState((function(e){return{players:e.players.map((function(e){return e.id===t.user_id?Object.assign(e,{score:t.score}):e}))}}))})),this.state.socket.emit("join",{lobby_id:t,player:{id:a.id,name:a.name,profileKey:a.profileKey}}),this.state.socket.on("state-change",(function(t){console.log("Changing state to ".concat(t)),e.setState({state:t}),console.log("Changing game state to ".concat(e.state.state))})),this.state.socket.on("disconnect",(function(e){console.log("Disconnected  from server..."),"ping timeout"!==e&&"transport close"!==e&&"transport error"!==e||console.log("Disconnection reason: ".concat(e))}))}},{key:"componentWillUnmount",value:function(){this.state.socket.offAny(["state-change","join","score","player-list-update","disconnect"]),this.state.socket.disconnect()}},{key:"onJoin",value:function(e){var t=this.props.authCreds.auth.user;e.success?this.setState({host:e.lobby.host.id===t.id,host_info:e.lobby.host,settings:e.lobby.settings,players:e.lobby.players,state:e.lobby.state}):this.props.history.push("/")}},{key:"pageManager",value:function(){return this.state.state===g.IN_LOBBY?Object(n.jsx)(V,{socket:this.state.socket,isHost:this.state.host,players:this.state.players,settings:this.state.settings,hostId:this.state.host_info.id}):this.state.state===g.IN_GAME?Object(n.jsx)(me,{players:this.state.players,socket:this.state.socket}):this.state.state===g.GAME_ENDED?Object(n.jsx)(fe,{players:this.state.players,socket:this.state.socket,isHost:this.state.host}):this.state.state===g.GAME_DISCONNECTED?Object(n.jsx)(p.a,{to:"/"}):void 0}},{key:"render",value:function(){return Object(n.jsx)(o.a.Fragment,{children:this.pageManager()})}}]),a}(s.Component),xe=C(Object(p.g)(ye));a(194);function ke(e){return Object(n.jsxs)(W.a,Object(j.a)(Object(j.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(n.jsx)(W.a.Header,{closeButton:!0,children:Object(n.jsx)(W.a.Title,{id:"contained-modal-title-vcenter",children:e.title})}),Object(n.jsx)(W.a.Body,{children:e.islog?e.body.map((function(e){return Object(n.jsx)("li",{children:e},e)})):e.body}),Object(n.jsxs)(W.a.Footer,{children:[Object(n.jsx)(k.a,{onClick:function(){e.onHide()},children:"Close"}),e.islog?"":Object(n.jsx)(k.a,{onClick:function(){e.onHide(),e.actionforyes(e.document)},children:"Yes"}),e.islog?"":Object(n.jsx)(k.a,{onClick:function(){e.onHide(),e.actionforno(e.document)},children:"No"})]})]}))}function Ce(e){var t=o.a.useState(!1),a=Object(m.a)(t,2),s=a[0],r=a[1];return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)(k.a,{variant:"outline-dark",onClick:function(){r(!0),e.chatLogFunc(e.document)},children:e.title}),Object(n.jsx)(ke,{show:s,option:e.option,onHide:function(){r(!1),e.clearMesFunc()},title:e.title,body:e.body,islog:e.islog,actionforyes:e.actionforyes,actionforno:e.actionforno,document:e.document})]})}var we=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={messages:[],documents:[],players:[],reasons:[],dates:[],lobbyIDs:[]},n.deleteReport=n.deleteReport.bind(Object(S.a)(n)),n.gettingReport=n.gettingReport.bind(Object(S.a)(n)),n.banPlayer=n.banPlayer.bind(Object(S.a)(n)),n.getChatLog=n.getChatLog.bind(Object(S.a)(n)),n.clearMessages=n.clearMessages.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.gettingReport()}},{key:"gettingReport",value:function(){var e=this;fetch("/report/report",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to get the report")})).then((function(t){e.setState({documents:t.document,players:t.player,reasons:t.reason,dates:t.date,lobbyIDs:t.lobbyID})})).catch((function(e){console.log(e)}))}},{key:"deleteReport",value:function(e){var t=this;console.log("delete Report"),fetch(f+"/report/delete?documentID=".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed create new room")})).then((function(e){console.log(e),e.success&&t.setState({documents:e.document,players:e.player,reasons:e.reason,dates:e.date,lobbyIDs:e.lobbyID})})).catch((function(e){console.log(e)}))}},{key:"banPlayer",value:function(e){var t=this;console.log("ban player"),fetch(f+"/report/ban?documentID=".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed create new room")})).then((function(e){console.log(e),e.success&&t.setState({documents:e.document,players:e.player,reasons:e.reason,dates:e.date,lobbyIDs:e.lobbyID})})).catch((function(e){console.log(e)}))}},{key:"getChatLog",value:function(e){var t=this;console.log("getting chat log"),fetch(f+"/report/chatLog?documentID=".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed create new room")})).then((function(e){e.success&&t.setState({messages:e.message})})).catch((function(e){console.log(e)}))}},{key:"clearMessages",value:function(){this.setState({messages:[]})}},{key:"render",value:function(){var e,t=[];for(e=0;e<this.state.documents.length;e++){var a=new Date(this.state.dates[e]);t.push(Object(n.jsx)(F.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"myContainer",children:[Object(n.jsxs)("div",{className:"PlayerName",children:[" ","Player: ",this.state.players[e]]}),Object(n.jsxs)("div",{className:"Date",children:[" ","Date: ",a.getFullYear(),"/",a.getMonth()+1,"/",a.getDate()]}),Object(n.jsxs)("div",{className:"Reason",children:[" ","Reason: ",this.state.reasons[e]]})]}),Object(n.jsxs)("div",{className:"button-group",children:[Object(n.jsx)(Ce,{option:"delete",title:"Delete Report",body:"Are you sure that you wanna delete the report?",actionforyes:this.deleteReport,chatLogFunc:function(){},actionforno:function(){},document:this.state.documents[e],clearMesFunc:this.clearMessages}),Object(n.jsx)(Ce,{option:"log",title:"Chat History",body:this.state.messages,islog:!0,document:this.state.documents[e],chatLogFunc:this.getChatLog,clearMesFunc:this.clearMessages}),Object(n.jsx)(Ce,{option:"ban",title:"Ban player",body:"Are you sure that you wanna ban the player?",actionforyes:this.banPlayer,chatLogFunc:function(){},actionforno:this.deleteReport,document:this.state.documents[e],clearMesFunc:this.clearMessages})]})]})},e))}return Object(n.jsxs)("div",{className:"content",children:[Object(n.jsxs)("h3",{className:"Title",children:["Report",Object(n.jsx)(u.b,{to:"/",children:Object(n.jsx)(k.a,{className:"home",variant:"info",children:"Home"})})]}),t]})}}]),a}(o.a.Component),Ne=a(88),Se=(a(195),C(function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={errorMessage:"",gameHistory:[]},n.getLobbies=n.getLobbies.bind(Object(S.a)(n)),n.getUserPlacementString=n.getUserPlacementString.bind(Object(S.a)(n)),n.getUserScore=n.getUserScore.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getLobbies()}},{key:"getLobbies",value:function(){var e=this;fetch("".concat(f,"/profile/matches?userID=").concat(this.props.authCreds.auth.user.id),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed get match history")})).then((function(t){e.setState({gameHistory:t.gameHistory})})).catch((function(t){console.log(t),e.setState({errorMessage:"Something went wrong getting match history."})}))}},{key:"getUserPlacementString",value:function(e,t){return"#"+(e.scores.findIndex((function(e){return e.name===t}))+1)}},{key:"getUserScore",value:function(e,t){return e.scores.find((function(e){return e.name===t})).score}},{key:"render",value:function(){var e=this,t=this.props.authCreds.auth.user;return Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)("div",{className:"match-history-content",children:[Object(n.jsx)(M,{showCreateGame:!1,showHome:!0}),""!==this.state.errorMessage?Object(n.jsx)("h2",{children:this.state.errorMessage}):Object(n.jsx)("div",{className:"match-history-container",children:this.state.gameHistory&&this.state.gameHistory!==[]?this.state.gameHistory.map((function(a,s){return Object(n.jsx)(T.a,{children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(F.a.Header,{children:Object(n.jsx)(T.a.Toggle,{as:k.a,variant:"Link",eventKey:s+1,children:new Date(1e3*a.date._seconds).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})}),Object(n.jsx)(T.a.Collapse,{eventKey:s+1,children:Object(n.jsx)(F.a.Body,{children:Object(n.jsx)("div",{className:"game-overview",children:Object(n.jsxs)("div",{className:"game-record",children:[Object(n.jsxs)("h2",{children:["You placed:"," ",e.getUserPlacementString(a,t.name)]}),Object(n.jsxs)("p",{children:["Your Score:"," ",e.getUserScore(a,t.name)]}),Object(n.jsxs)("p",{children:["Rounds: ",a.rounds]}),Object(n.jsxs)(Ne.a,{responsive:!0,className:"score-table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{}),Object(n.jsx)("th",{children:"Player"}),Object(n.jsx)("th",{children:"Score"})]})}),Object(n.jsx)("tbody",{children:a.scores.sort((function(e,t){return t.score-e.score})).map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.score})]},t)}))})]})]})},s)})})]})},s)})):Object(n.jsx)("h3",{children:"No matches found, play a game and when you finish the game history will be here!"})})]})})}}]),a}(o.a.Component))),Ie=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(u.a,{children:Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/login",component:N}),Object(n.jsx)(x,{exact:!0,path:"/",component:G}),Object(n.jsx)(x,{exact:!0,path:"/banPage",component:L}),Object(n.jsx)(x,{exact:!0,path:"/profile",component:K}),Object(n.jsx)(x,{exact:!0,path:"/game/:lobbyID",component:xe}),Object(n.jsx)(x,{exact:!0,path:"/history",component:Se}),Object(n.jsx)(x,{exact:!0,path:"/report",component:we})]})})})}}]),a}(s.Component),De=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),o(e),r(e)}))};a(196);i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(v,{children:Object(n.jsx)(Ie,{})})}),document.getElementById("root")),De()}},[[197,1,2]]]);
//# sourceMappingURL=main.76bb9c80.chunk.js.map